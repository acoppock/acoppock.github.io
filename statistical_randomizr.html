<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>randomizr</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>

<meta name="description" content="Turn your analyses into high quality documents, reports, presentations and dashboards with R Markdown. Use a productive notebook interface to weave together narrative text and code to produce elegantly formatted output. Use multiple languages including R, Python, and SQL. R Markdown supports a reproducible workflow for dozens of static and dynamic output formats including HTML, PDF, MS Word, Beamer, HTML5 slides, Tufte-style handouts, books, dashboards, shiny applications, scientific articles, websites, and more." />

<link rel="icon" type="image/png" href="images/favicon.png" />

<script type="text/javascript" src="js/rmarkdown.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-20375833-14', 'auto');
  ga('send', 'pageview');
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="css/rmarkdown.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="rStudioHeader" class="alwaysShrunk">
  <div class="innards bandContent">
    <div>
      <a class="productName" href="/index.html">Alexander Coppock</a>
    </div>

    <div id="menu">
      <div id="menuToggler"></div>
      <div id="menuItems">
        <a class="menuItem" href="menu_published_papers.html">Published Articles</a>
        <a class="menuItem" href="menu_working_papers.html">Working Papers</a>
        <a class="menuItem" href="menu_statistical_tools.html">Statistical Tools</a>
        <a class="menuItem" href="menu_teaching.html">Teaching</a>
      </div>
    </div>
  </div>
</div>

<style type="text/css">
#TOC {
  margin-left: 35px;
  margin-top: 90px;
}
</style>

<script type="text/javascript">
$(".main-container").removeClass("main-container").removeClass("container-fluid").addClass("footerPushDown");
</script>


<div id="pageContent" class="standardPadding">
  <div class="articleBandContent">

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">randomizr</h1>

</div>


<p>randomizr is a small r package that contains easy functions for common forms of random assignment: simple, complete, blocked, and clustered. Version 0.3.0 is now available on CRAN. (Development version <a href="https://github.com/DeclareDesign/randomizr">available on github</a>.) Execute the following code to install it. Please email me with questions, bugs, or requests.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># If not installed:</span>
<span class="co"># install.packages(&quot;devtools&quot;)</span>
<span class="co"># devtools::install_github(&quot;acoppock/randomizr&quot;)</span>
<span class="kw">library</span>(randomizr)</code></pre></div>
<p>The vignette shows how to make the most of randomizr. <a href="http://www.columbia.edu/~ac3242/randomizr_vignette.html">Check out the vignette here</a>. (<a href="/statistical/randomizr_vignette">pdf version</a>)</p>
<div id="whats-new-in-version-0.3.0" class="section level2">
<h2>What’s new in Version 0.3.0</h2>
<p>The biggest change in version 0.3.0 is the declare_ra() functionality. The declare_ra function is used in three ways:</p>
<ol style="list-style-type: decimal">
<li>To obtain some basic facts about a randomization:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">declaration &lt;-<span class="st"> </span><span class="kw">declare_ra</span>(<span class="dt">N=</span><span class="dv">100</span>, <span class="dt">m_each=</span><span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">40</span>))
declaration</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>To conduct a random assignment:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Z &lt;-<span class="st"> </span><span class="kw">conduct_ra</span>(declaration)
<span class="kw">table</span>(Z)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>To obtain observed condition probabilities:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">probs &lt;-<span class="st"> </span><span class="kw">obtain_condition_probabilities</span>(declaration, Z)
<span class="kw">table</span>(probs, Z)</code></pre></div>
</div>
<div id="complete-random-assignment" class="section level2">
<h2>Complete random assignment</h2>
<p>This is the workhorse random assignment function in randomizr. complete_ra() assigns a specific number of units to each treatment condition.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Z &lt;-<span class="st"> </span><span class="kw">complete_ra</span>(<span class="dt">N=</span><span class="dv">100</span>, <span class="dt">m=</span><span class="dv">50</span>)
<span class="kw">table</span>(Z)
 
Z &lt;-<span class="st"> </span><span class="kw">complete_ra</span>(<span class="dt">N=</span><span class="dv">100</span>, <span class="dt">m_each=</span><span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">40</span>),
<span class="dt">condition_names=</span><span class="kw">c</span>(<span class="st">&quot;control&quot;</span>, <span class="st">&quot;placebo&quot;</span>, <span class="st">&quot;treatment&quot;</span>))
<span class="kw">table</span>(Z)</code></pre></div>
</div>
<div id="block-random-assignment" class="section level2">
<h2>Block random assignment</h2>
<p>This function takes a vector that is of length N and indicates which block each unit belongs to. It performs complete random assignment within each block. There are a couple of ways to specify how many units in each block should be assigned to each treatment condition.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">block_var &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>), <span class="dt">times=</span><span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">200</span>))
Z &lt;-<span class="st"> </span><span class="kw">block_ra</span>(<span class="dt">block_var=</span>block_var)
<span class="kw">table</span>(block_var, Z)
 
block_m &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">20</span>),
<span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">50</span>, <span class="dv">20</span>),
<span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">75</span>))
Z &lt;-<span class="st"> </span><span class="kw">block_ra</span>(<span class="dt">block_var=</span>block_var, <span class="dt">block_m=</span>block_m )
<span class="kw">table</span>(block_var, Z)
 
Z &lt;-<span class="st"> </span><span class="kw">block_ra</span>(<span class="dt">block_var=</span>block_var, <span class="dt">block_prob=</span><span class="kw">c</span>(.<span class="dv">1</span>, .<span class="dv">1</span>, .<span class="dv">8</span>))
<span class="kw">table</span>(block_var, Z)</code></pre></div>
</div>
<div id="clustered-random-assignment" class="section level2">
<h2>Clustered random assignment</h2>
<p>If your experiment needs to assign groups of units together (students in classrooms, voters in media markets, citizens in towns), you have to use clustered random assignment. Typically, clustered designs yield larger standard errors than the equivalently sized experiment randomized at the individual level.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">clust_var &lt;-<span class="st"> </span><span class="kw">rep</span>(letters, <span class="dt">times=</span><span class="dv">1</span>:<span class="dv">26</span>)
 
Z &lt;-<span class="st"> </span><span class="kw">cluster_ra</span>(<span class="dt">clust_var=</span>clust_var)
<span class="kw">table</span>(Z, clust_var)
 
Z &lt;-<span class="st"> </span><span class="kw">cluster_ra</span>(<span class="dt">clust_var=</span>clust_var, <span class="dt">m_each=</span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">7</span>, <span class="dv">12</span>))
<span class="kw">table</span>(Z, clust_var)</code></pre></div>
</div>

  </div> <!-- articleBandContent -->
</div> <!-- pageContent -->

<div id="rStudioFooter" class="band full">
<div class="bandContent">
  <div id="copyright">© Copyright 2017 Alexander Coppock</div>
  <div id="logos">
    <a href="https://twitter.com/aecoppock" class="footerLogo twitter"></a>
    <a href="https://github.com/acoppock" class="footerLogo gitHub"></a>
    <a href="http://orcid.org/0000-0002-5733-2386" class="footerLogo orcid"></a>
    <a href="https://scholar.google.com/citations?user=00ZskrIAAAAJ" class="footerLogo gscholar"></a>
    <a href="http://thedata.harvard.edu/dvn/dv/alexandercoppock" class="footerLogo dataverse"></a>


        <a href="http://politicalscience.yale.edu/people/alexander-coppock" class="footerLogo yale"></a>
  </div>
</div>
</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>


</body>
</html>
